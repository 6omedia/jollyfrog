function JFrogForm(e,t,i,n,o){var s=this;this.name=e,this.submitBtn=t,this.fields=i,document.getElementById(this.submitBtn)&&document.getElementById(this.submitBtn).addEventListener("click",function(){s.submitForm(s,n,o)})}function JFrog(e){this.forms=[],this.url=e,this.device={}}JFrogForm.prototype.getValues=function(e){for(i=0;i<e.length;i++){var t=e[i];if(t.required&&document.getElementById(t.field_id)){if(""==document.getElementById(t.field_id).value)return!1;t.value=document.getElementById(t.field_id).value}}return e},JFrogForm.prototype.submitForm=function(e,t,n){if(0!=this.getValues(e.fields)){var o=[];for(i=0;i<e.fields.length;i++)o.push({name:e.fields[i].name,value:e.fields[i].value});t.form_name=e.name,t.datapoints=o;var n=n+"/api/log_formsubmission",s=new XMLHttpRequest;s.onreadystatechange=function(){this.readyState},s.open("POST",n,!0),s.setRequestHeader("Content-Type","application/json"),s.send(JSON.stringify(t))}},JFrog.prototype.doIt=function(e,t){this.trackObj={apikey:e,domain:window.location.hostname,url:window.location.href,fingerprint:t.getFingerprint(),type:t.getDeviceType()||"",vendor:t.getDeviceVendor()||"",browser:t.getBrowser(),os:t.getOS(),screen:{res:t.getAvailableResolution(),colorDepth:t.getColorDepth()},timezone:t.getTimeZone(),language:t.getLanguage(),meta:{funnel_position:document.getElementById("tracking_info").dataset.funnel_position||""}},this.trackPageView(this.trackObj),this.findForms(e)},JFrog.prototype.trackPageView=function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){4==this.readyState&&console.log("track page ",this.response)};var i=this.url+"/api/log_page_view";t.open("POST",i,!0),t.setRequestHeader("Content-Type","application/json"),t.send(JSON.stringify(e))},JFrog.prototype.findForms=function(e){var t=this,n=this.url+"/api/forms/"+window.location.hostname+"?apikey="+e,o=t.trackObj,s=new XMLHttpRequest;s.onreadystatechange=function(){if(4==this.readyState){var e=JSON.parse(this.response).forms[0].websites[0].forms;for(i=0;i<e.length;i++){var n=new JFrogForm(e[i].name,e[i].submit_id,e[i].fields,o,t.url);t.forms.push(n)}}},s.open("GET",n,!0),s.setRequestHeader("Content-Type","application/json"),s.send()};